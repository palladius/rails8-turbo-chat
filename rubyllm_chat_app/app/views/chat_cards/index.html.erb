<div class="container mx-auto px-4">
  <h1 class="text-2xl font-bold text-center my-8">Chat Cards</h1>
  <div class="flex flex-col gap-4 mb-8">
    <% if current_user %>
      <%= form_with(model: Chat.new, url: chats_path, method: :post, class: "contents") do |f| %>
        <%= f.submit "âœ¨ Start New Chat", class: "bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded" %>
      <% end %>
      <%= link_to "Go to Chats", chats_path, class: "text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
      <% if params[:show_all] %>
        <%= link_to "Show Only Chats with Images", root_path, class: "text-center bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" %>
      <% else %>
        <%= link_to "Show ALL chats", root_path(show_all: true), class: "text-center bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" %>
      <% end %>
    <% else %>
      <%= link_to "ðŸ”‘ Log In", new_user_session_path, class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
      <%= link_to "âœ¨ Sign Up", new_user_registration_path, class: "bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded ml-2" %>
    <% end %>
  </div>
  <div class="flex justify-center">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
      <% @chats.each do |chat| %>
        <%= link_to chat do %>
          <div class="relative max-w-sm rounded overflow-hidden shadow-lg">
            <% if chat.generated_image.attached? %>
              <%= image_tag chat.generated_image, class: "w-full" %>
              <div class="absolute top-0 left-0 w-full px-6 py-4 bg-gradient-to-b from-black to-transparent">
                <div class="font-bold text-xl mb-2 text-white"><%= chat.public ? "ðŸ‘€ " : "" %><%= chat.title %></div>
              </div>
              <% if chat.public %>
                <div class="absolute top-0 right-0 px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-bl-lg">
                  Public
                </div>
              <% end %>
            <% else %>
              <div class="px-6 py-4">
                <div class="font-bold text-xl mb-2"><%= chat.public ? "ðŸ‘€ " : "" %><%= chat.title %></div>
              </div>
              <% if chat.public %>
                <div class="absolute top-0 right-0 px-2 py-1 bg-black bg-opacity-50 text-white text-xs rounded-bl-lg">
                  Public
                </div>
              <% end %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
